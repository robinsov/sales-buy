<app-no-data *ngIf="!mensaje"></app-no-data>

<div class="fix-header single-column card-no-border fix-sidebar animate fadeIn" *ngIf="mensaje && vendedor">
    <!-- <img src="assets/img/fondo.jpg" alt=""> -->


    <div class="chat-main-header">
        <div class="p-20 b-b">
            <h3 class="box-title">
                Chat:
                <small>
                    {{ mensaje.anuncio.tituloAnuncio }} --
                    {{ mensaje.anuncio.precioUni | currency }}
                </small>
            </h3>
        </div>
    </div>

    <ng-scrollbar #scrollable class="scroll-event" thumbClass="white-scrollbars">
        <!-- Content -->
        <div class="chat-rbox">
            <ul #caja class="chat-list p-20" id="divChatbox">
                <!--chat Row -->
                <li *ngFor="let item of mensaje.mensaje" [ngClass]="{'reverse': item.usuario._id !== vendedorMensaje._id}">
                    <div class="chat-content">
                        <h5>{{ item.usuario.nombre }}</h5>
                        <div class="box ml-2 mr-2" [ngClass]="{'bg-light-info':
                            item.usuario._id !== vendedorMensaje._id,
                            'bg-light-inverse':
                            item.usuario._id === vendedorMensaje._id}">
                            <img class="img-circle img-chica img-thumbnail" [src]="item.usuario.img" alt="" /> {{ item.mensaje }} <br />
                            <div class="chat-time">{{ mensaje.fecha }}</div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </ng-scrollbar>

    <div class="card-body b-t">
        <form id="formEnviar" (ngSubmit)="responderMensaje(mensaje._id)">
            <div class="row">
                <div class="col-10">
                    <input autocomplete="off" id="txtMensaje" name="mensaje" placeholder="Escribe tu mensaje aquÃ­" [(ngModel)]="mensajeAEnviar" class="form-control" autofocus />
                </div>
                <div class="col-2 text-right">
                    <button type="submit" class="btn btn-info btn-circle btn-lg">
                        <i class="far fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>

    <div>
        <button #end hidden id="irFin" (click)="scrollable.scrollTo({bottom: -160})"></button>
    </div>



    <footer class="footer">Chat - {{ mensaje.vendedor.nombre }}</footer>

    <button class="btn btn-success btn btn-block" type="button" routerLink="/sideBarMensajes">
    Volver a los mensajes
  </button>
</div>