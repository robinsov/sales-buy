<app-no-data *ngIf="!mensaje"></app-no-data>

<div class="fix-header single-column card-no-border fix-sidebar animate fadeIn" *ngIf="mensaje && vendedor">

    <!-- ============================================================== -->
    <!-- Main wrapper -->
    <!-- ============================================================== -->
    <div id="main-wrapper">

        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">

            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">


                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
                <div class="row animated fadeIn">
                    <div class="col-12">
                        <div class="card m-b-0">
                            <div class="chat-main-box">

                                <div class="chat-right-aside">
                                    <div class="chat-main-header">
                                        <div class="p-20 b-b">
                                            <h3 class="box-title">Chat: <small> {{mensaje.anuncio.tituloAnuncio}} -- {{mensaje.anuncio.precioUni|currency}} </small></h3>

                                            <!-- 
                                            <img [src]="mensaje.mensaje.usuario.img" alt=""> -->
                                        </div>
                                    </div>

                                    <div class="chat-rbox">
                                        <ul class="chat-list p-20" id="divChatbox">
                                            <!--chat Row -->
                                            <li *ngFor="let item of mensaje.mensaje" [ngClass]="{'reverse': item.usuario._id !== vendedorMensaje._id}">
                                                <div class="chat-content">
                                                    <h5> {{item.usuario.nombre}} </h5>
                                                    <div class="box ml-2 mr-2" [ngClass]="{'bg-light-info': item.usuario._id !== vendedorMensaje._id, 'bg-light-inverse':item.usuario._id === vendedorMensaje._id}">
                                                        <img class="img-circle img-chica  img-thumbnail" [src]="item.usuario.img" alt=""> {{item.mensaje}} <br>
                                                        <div class="chat-time"> {{mensaje.fecha }} </div>
                                                    </div>
                                                </div>
                                            </li>


                                        </ul>
                                    </div>
                                    <div class="card-body b-t">

                                        <form id="formEnviar" (ngSubmit)="responderMensaje(mensaje._id)">
                                            <div class="row">
                                                <div class="col-8">
                                                    <input autocomplete="off" id="txtMensaje" name="mensaje" placeholder="Escribe tu mensaje aquÃ­" [(ngModel)]="mensajeAEnviar" class="form-control" autofocus>
                                                </div>
                                                <div class="col-4 text-right">
                                                    <button type="submit" class="btn btn-info btn-circle btn-lg">
                                                        <i class="far fa-paper-plane"></i> 
                                                    </button>
                                                </div>
                                            </div>
                                        </form>

                                    </div>
                                </div>
                                <!-- .chat-right-panel -->
                            </div>
                            <!-- /.chat-row -->
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->

            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            <footer class="footer">
                Chat - {{mensaje.vendedor.nombre}}
            </footer>
            <!-- ============================================================== -->
            <!-- End footer -->
            <!-- ============================================================== -->
        </div>
        <button class="btn btn-success btn btn-block" type="button" routerLink="/sideBarMensajes">
            Volver a los mensajes
        </button>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
    </div>
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->

</div>